<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>muSE: Generic functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">muSE
   &#160;<span id="projectnumber">r716</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Generic functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>A generic function is one whose definition can be augmented even after it is first created.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad54a8bbc735ea9557b905150a847d3a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GenericFns.html#gad54a8bbc735ea9557b905150a847d3a1">fn_define_extension</a> (<a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *env, void *context, <a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> args)</td></tr>
<tr class="separator:gad54a8bbc735ea9557b905150a847d3a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga809d407c00fbc3b499e82276a49c5bbd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GenericFns.html#ga809d407c00fbc3b499e82276a49c5bbd">fn_define_override</a> (<a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *env, void *context, <a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> args)</td></tr>
<tr class="separator:ga809d407c00fbc3b499e82276a49c5bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03988c727ca3aee7d8c2c249909c5d3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GenericFns.html#ga03988c727ca3aee7d8c2c249909c5d3e">syntax_local</a> (<a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *env, void *context, <a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> args)</td></tr>
<tr class="separator:ga03988c727ca3aee7d8c2c249909c5d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga07873c5f51b927f2a082311753133246"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GenericFns.html#ga07873c5f51b927f2a082311753133246">syntax_generic_lambda</a> (<a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *env, void *context, <a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> args)</td></tr>
<tr class="memdesc:ga07873c5f51b927f2a082311753133246"><td class="mdescLeft">&#160;</td><td class="mdescRight">(gfn formal-args body)  <a href="#ga07873c5f51b927f2a082311753133246">More...</a><br /></td></tr>
<tr class="separator:ga07873c5f51b927f2a082311753133246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga359e49dd8a051f7d0173d4a76903f148"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__GenericFns.html#ga359e49dd8a051f7d0173d4a76903f148">syntax_generic_block</a> (<a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *env, void *context, <a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> args)</td></tr>
<tr class="memdesc:ga359e49dd8a051f7d0173d4a76903f148"><td class="mdescLeft">&#160;</td><td class="mdescRight">(gfn: formal-args body)  <a href="#ga359e49dd8a051f7d0173d4a76903f148">More...</a><br /></td></tr>
<tr class="separator:ga359e49dd8a051f7d0173d4a76903f148"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A generic function is one whose definition can be augmented even after it is first created. </p>
<p>Every function presents a "case" to the evaluator - its supplied argument may or may not match the declared argument pattern of the function. The generic function mechanism allows you to define a function in terms of a number of such cases that are incrementally specified - potentially in different source files.</p>
<p>For example, the humble factorial can be defined in two phases - </p><div class="fragment"><div class="line">(define fact (gfn (1) 1))</div><div class="line">(define fact (fn (n) (* n (fact (- n 1)))))</div></div><!-- fragment --><p> The second function's definition is added to the existing generic function so that you can do the following - </p><div class="fragment"><div class="line">&gt; (fact 3)</div><div class="line">6</div><div class="line">&gt; (fact 5)</div><div class="line">120</div></div><!-- fragment --><p>You can use <a class="el" href="group__CellManipulation.html#gad54a8bbc735ea9557b905150a847d3a1">define-extension</a> or <a class="el" href="group__CellManipulation.html#ga809d407c00fbc3b499e82276a49c5bbd">define-override</a> to augment a generic function. When supplied with a generic function, <a class="el" href="group__CellManipulation.html#ga6d9aaa441453c9f657c54c3ee7ad6e11">define</a> itself behaves like <code>define-extension</code> which is the most common use case for generic functions.</p>
<p>It is important to note that if a partially specified generic function is captured in a closure and then augmented with a new case, the new case <b>will</b> influence the closure.</p>
<p>Since macros are just functions, you can create "generic macros" the same way you create generic functions. The constraint here is that a function used to extend a generic macro must itself be a macro.</p>
<p>There is some overhead to using generic functions versus normal functions - the overhead of dispatching a given set of arguments to the appropriate case. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gad54a8bbc735ea9557b905150a847d3a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> fn_define_extension </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;(define-extension generic-fn-symbol fn-extension) </div></div><!-- fragment --><p>Obeys the same syntax as <a class="el" href="group__CellManipulation.html#ga6d9aaa441453c9f657c54c3ee7ad6e11">define</a>, except that the symbol for extension is expected to be bound to a <a class="el" href="group__CoreLanguage.html#ga07873c5f51b927f2a082311753133246">generic function</a>. Only generic functions can be extended.</p>
<p>"Extension" means that the case presented by the given function is examined <b>after</b> all the preceding cases. So if the extension function has the same argument pattern as any of the preceding cases, will not have any effect on the behaviour of the generic function.</p>
<p>You can also use <a class="el" href="group__CellManipulation.html#ga6d9aaa441453c9f657c54c3ee7ad6e11">define</a> instead of <code>define-extension</code>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__CoreLanguage.html#ga07873c5f51b927f2a082311753133246">gfn</a>, <a class="el" href="group__CoreLanguage.html#ga359e49dd8a051f7d0173d4a76903f148">gfn:</a>, <a class="el" href="group__CellManipulation.html#ga809d407c00fbc3b499e82276a49c5bbd">define-override</a> </dd></dl>

<p>References <a class="el" href="group__CellManipulation.html#ga6d9aaa441453c9f657c54c3ee7ad6e11">fn_define()</a>.</p>

</div>
</div>
<a class="anchor" id="ga809d407c00fbc3b499e82276a49c5bbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> fn_define_override </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;(define-override generic-fn-symbol fn-override) </div></div><!-- fragment --><p>Obeys the same syntax as <a class="el" href="group__CellManipulation.html#ga6d9aaa441453c9f657c54c3ee7ad6e11">define</a>, except that the symbol for extension is expected to be bound to a <a class="el" href="group__CoreLanguage.html#ga07873c5f51b927f2a082311753133246">generic function</a>. Only generic functions can be overridden.</p>
<p>"Override" means that the case presented by the given function is examined <b>before</b> all the preceding cases of the generic function. This means that if an overriding function has the same argument pattern as any preceding case, it'll completely take over and not give the preceding case a chance.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__CoreLanguage.html#ga07873c5f51b927f2a082311753133246">gfn</a>, <a class="el" href="group__CoreLanguage.html#ga359e49dd8a051f7d0173d4a76903f148">gfn:</a>, <a class="el" href="group__CellManipulation.html#gad54a8bbc735ea9557b905150a847d3a1">define-extension</a> </dd></dl>

<p>References <a class="el" href="group__CellManipulation.html#ga6d9aaa441453c9f657c54c3ee7ad6e11">fn_define()</a>.</p>

</div>
</div>
<a class="anchor" id="ga03988c727ca3aee7d8c2c249909c5d3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> syntax_local </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;(local symbol1 symbol2 ...) </div></div><!-- fragment --><p>The local declaration is used to introduce symbols that are, well, local to a particular context. What it says is that "from this point onwards and till the end of the surrounding scope, you have to discard any previous definitions of these symbols". This is useful mostly in module definitions to prevent the definitions of some symbols from influencing the definition of the module. For example - </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;; A function to determine if the sequence [a,b,c] progresses evenly.</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;(define (even? a b c) (= (- b a) (- c b)))</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;(module Num (classify)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  (local even? odd?)  ; Ignore previous definitions/declarations of even? and odd?.</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;                      ; Without this, the following declaration will give a </div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;                      ; redeclaration error.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  (define (even? n))  ; Forward declare even? so that odd? can use it.</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  (define (odd? n) (case n (0 ()) (_ (even? (- n 1)))))</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  (define (even? n) (case n (0 T) (_ (odd? (- n 1))))))</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  (define (classify n) (cond ((even? n) &#39;even) ((odd? n) &#39;odd)))</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;)</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;; At this point, the original 3-argument definition of even? is available.</div></div><!-- fragment --> 
<p>References <a class="el" href="group__MuseAPI.html#gafa6f83554ab1865d2df3bb642b399b66">muse_message()</a>, <a class="el" href="group__MuseAPI.html#ga46ffbd092a8da85372d8d623f33ae47c">muse_mk_functional_object()</a>, <a class="el" href="group__MuseAPI.html#gga71b858b1a2cd474be8f987d0271f1890a691eefc496b45215c8ff94a59de008c3">MUSE_NIL</a>, <a class="el" href="group__MuseAPI.html#ggab5b6d16681e25eaab89b93fad90b4727aac36b25578762b2a3304acfafa7a74bf">MUSE_SYMBOL_CELL</a>, and <a class="el" href="group__Ports.html#gabcd4c57a466b82c1c4e0e2a499dd2213">port_write()</a>.</p>

</div>
</div>
<a class="anchor" id="ga07873c5f51b927f2a082311753133246"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> syntax_generic_lambda </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(gfn formal-args body) </p>
<p><code>gfn</code> creates a generic function that can be extended or overridden using <a class="el" href="group__CellManipulation.html#gad54a8bbc735ea9557b905150a847d3a1">define-extension</a> and <a class="el" href="group__CellManipulation.html#ga809d407c00fbc3b499e82276a49c5bbd">define-override</a>. You can define generic functions as well as macros.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__CoreLanguage.html#ga359e49dd8a051f7d0173d4a76903f148">gfn:</a> </dd></dl>

<p>References <a class="el" href="group__CoreLanguage.html#ga9cf0e1a4958ba27dfe9e7034c9ef82c2">syntax_lambda()</a>.</p>

<p>Referenced by <a class="el" href="group__MuseAPI.html#gabeda9f5d0bbf639140adb54c995e7108">muse_bind_copy_expr()</a>.</p>

</div>
</div>
<a class="anchor" id="ga359e49dd8a051f7d0173d4a76903f148"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> syntax_generic_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(gfn: formal-args body) </p>
<p><code>gfn:</code> creates a generic function that can be extended or overridden using <a class="el" href="group__CellManipulation.html#gad54a8bbc735ea9557b905150a847d3a1">define-extension</a> and <a class="el" href="group__CellManipulation.html#ga809d407c00fbc3b499e82276a49c5bbd">define-override</a>. This version is similar to <a class="el" href="group__CoreLanguage.html#ga07873c5f51b927f2a082311753133246">gfn</a>, but uses dynamic scoping in its body.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__CoreLanguage.html#ga07873c5f51b927f2a082311753133246">gfn</a> </dd></dl>

<p>References <a class="el" href="group__CoreLanguage.html#ga67ccd77f0054444fdb753e246633c3ac">syntax_block()</a>.</p>

<p>Referenced by <a class="el" href="group__MuseAPI.html#gabeda9f5d0bbf639140adb54c995e7108">muse_bind_copy_expr()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 16 2016 09:31:44 for muSE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
